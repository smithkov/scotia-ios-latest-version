(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"X7+O":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J"),u=e("mrSG"),r=e("Pn9U"),i=e("ZZ/e"),o=e("wMzM"),a=e("t8sF"),s=e("18Le"),b=e("AytR"),c=e("CUZT"),h=e("Yttj"),d=e("iWj2"),p=e("gRf5"),m=e("gREL");class f{constructor(l,n,e,t,u,r,i,o,a,s,c,h,d,p,m,f){this.loaderService=l,this.alertService=n,this.transfer=e,this.fileOpener=t,this.camera=u,this.file=r,this.http=i,this.webview=o,this.actionSheetController=a,this.toastController=s,this.storage=c,this.plt=h,this.loadingController=d,this.ref=p,this.filePath=m,this.authenticationService=f,this.capturedImage={path:"",filePath:""},this.hasNewImage=!1,this.fileTransfer=this.transfer.create(),this.authenticationService.getCurrentUser().then(l=>{this.userId=l.id,this.img=b.a.photoUrl+l.photo})}presentToast(l){return u.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,position:"bottom",duration:3e3})).present()}))}ngOnInit(){this.plt.ready().then(()=>{})}selectImage(){return u.b(this,void 0,void 0,(function*(){const l=yield this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:()=>{this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Use Camera",handler:()=>{this.takePicture(this.camera.PictureSourceType.CAMERA)}},{text:"Cancel",role:"cancel"}]});yield l.present()}))}takePicture(l){this.camera.getPicture({quality:100,allowEdit:!0,sourceType:l,destinationType:this.camera.DestinationType.FILE_URI,saveToPhotoAlbum:!1,correctOrientation:!0}).then(l=>{this.returnPath=l,this.hasNewImage=!0;let n=l.substring(l.lastIndexOf("/")+1),e=l.substring(0,l.lastIndexOf("/")+1);this.file.readAsDataURL(e,n).then(l=>this.img=l)})}upload(){this.loaderService.showLoader("Saving document ..."),this.fileTransfer.upload(this.returnPath,`${b.a.url}/user/photo`,{mimeType:"multipart/form-data",chunkedMode:!1,fileKey:"file",params:{userId:this.userId}}).then(l=>{this.loaderService.hideLoader(),this.presentToast("Your profile photo was update successfully")},l=>{this.loaderService.hideLoader(),this.alertService.presentToast("The server couldn't save this, try again later.")})}}class k{}var g=e("pMnS"),v=e("oBZk"),x=e("SVse"),q=e("IheW"),y=e("xgBC"),I=t.pb({encapsulation:0,styles:[[""]],data:{}});function S(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,3,"ion-buttons",[["padding",""],["slot","end"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.upload()&&t),t}),v.U,v.f)),t.qb(1,49152,null,0,i.m,[t.h,t.k,t.x],null,null),t.qb(2,16384,null,0,i.e,[t.k],null,null),(l()(),t.Jb(-1,0,[" Save "]))],null,null)}function B(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,13,"ion-header",[],null,null,null,v.fb,v.q)),t.qb(1,49152,null,0,i.C,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,11,"ion-toolbar",[["color","primary"]],null,null,null,v.Db,v.O)),t.qb(3,49152,null,0,i.Db,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.rb(4,0,null,0,2,"ion-title",[],null,null,null,v.Cb,v.N)),t.qb(5,49152,null,0,i.Bb,[t.h,t.k,t.x],null,null),(l()(),t.Jb(-1,0,["Profile Photo"])),(l()(),t.rb(7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,v.U,v.f)),t.qb(8,49152,null,0,i.m,[t.h,t.k,t.x],null,null),(l()(),t.rb(9,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t.Db(l,11).onClick(e)&&u),u}),v.R,v.c)),t.qb(10,49152,null,0,i.h,[t.h,t.k,t.x],null,null),t.qb(11,16384,null,0,i.i,[[2,i.jb],i.Jb],null,null),(l()(),t.gb(16777216,null,0,1,null,S)),t.qb(13,16384,null,0,x.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(14,0,null,null,15,"ion-content",[["fullscreen",""],["padding",""]],null,null,null,v.bb,v.m)),t.qb(15,49152,null,0,i.v,[t.h,t.k,t.x],{fullscreen:[0,"fullscreen"]},null),t.qb(16,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(17,0,null,0,12,"ion-card",[],null,null,null,v.Z,v.g)),t.qb(18,49152,null,0,i.n,[t.h,t.k,t.x],null,null),(l()(),t.rb(19,0,null,0,10,"ion-grid",[],null,null,null,v.eb,v.p)),t.qb(20,49152,null,0,i.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(21,0,null,0,8,"ion-row",[["color","primary"],["justify-content-center",""]],null,null,null,v.vb,v.G)),t.qb(22,49152,null,0,i.kb,[t.h,t.k,t.x],null,null),t.qb(23,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(24,0,null,0,5,"ion-col",[["align-self-center",""],["size-lg","5"],["size-md","6"],["size-xs","12"]],null,null,null,v.ab,v.l)),t.qb(25,49152,null,0,i.u,[t.h,t.k,t.x],null,null),t.qb(26,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(27,0,null,0,2,"div",[["text-center",""]],null,null,null,null,null)),t.qb(28,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(29,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.rb(30,0,null,null,9,"ion-footer",[["padding",""]],null,null,null,v.db,v.o)),t.qb(31,49152,null,0,i.A,[t.h,t.k,t.x],null,null),t.qb(32,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(33,0,null,0,6,"ion-toolbar",[],null,null,null,v.Db,v.O)),t.qb(34,49152,null,0,i.Db,[t.h,t.k,t.x],null,null),(l()(),t.rb(35,0,null,0,4,"ion-button",[["color","primary"],["expand","block"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.selectImage()&&t),t}),v.T,v.e)),t.qb(36,49152,null,0,i.l,[t.h,t.k,t.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.rb(37,0,null,0,1,"ion-icon",[["name","camera"],["size","large"],["slot","start"]],null,null,null,v.gb,v.r)),t.qb(38,49152,null,0,i.D,[t.h,t.k,t.x],{name:[0,"name"],size:[1,"size"]},null),(l()(),t.Jb(-1,0,[" Select Image"]))],(function(l,n){var e=n.component;l(n,3,0,"primary"),l(n,13,0,e.hasNewImage),l(n,15,0,""),l(n,36,0,"primary","block"),l(n,38,0,"camera","large")}),(function(l,n){l(n,29,0,n.component.img)}))}function P(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,1,"app-photo",[],null,null,null,B,I)),t.qb(1,114688,null,0,f,[c.a,m.a,p.a,o.a,r.a,a.a,q.c,h.a,i.a,i.Rb,y.b,i.Mb,i.Hb,t.h,d.a,s.a],null,null)],(function(l,n){l(n,1,0)}),null)}var w=t.nb("app-photo",f,P,{},{},[]),T=e("s7LF"),C=e("iInd");e.d(n,"PhotoPageModuleNgFactory",(function(){return L}));var L=t.ob(k,[],(function(l){return t.Ab([t.Bb(512,t.j,t.Z,[[8,[g.a,w]],[3,t.j],t.v]),t.Bb(4608,x.l,x.k,[t.s,[2,x.r]]),t.Bb(4608,T.l,T.l,[]),t.Bb(4608,i.c,i.c,[t.x,t.g]),t.Bb(4608,i.Ib,i.Ib,[i.c,t.j,t.p]),t.Bb(4608,i.Nb,i.Nb,[i.c,t.j,t.p]),t.Bb(1073742336,x.b,x.b,[]),t.Bb(1073742336,T.k,T.k,[]),t.Bb(1073742336,T.b,T.b,[]),t.Bb(1073742336,i.Fb,i.Fb,[]),t.Bb(1073742336,C.o,C.o,[[2,C.t],[2,C.m]]),t.Bb(1073742336,k,k,[]),t.Bb(1024,C.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);