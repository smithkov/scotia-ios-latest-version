{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{\"X7+O\":function(l,n,e){\"use strict\";e.r(n);var t=e(\"8Y7J\"),u=e(\"mrSG\"),r=e(\"Pn9U\"),o=e(\"ZZ/e\"),i=e(\"wMzM\"),a=e(\"t8sF\"),s=e(\"18Le\"),c=e(\"AytR\"),b=e(\"CUZT\"),h=e(\"Yttj\"),p=e(\"iWj2\"),d=e(\"gRf5\"),m=e(\"nYR2\"),f=e(\"gREL\");class k{constructor(l,n,e,t,u,r,o,i,a,s,b,h,p,d,m,f){this.loaderService=l,this.alertService=n,this.transfer=e,this.fileOpener=t,this.camera=u,this.file=r,this.http=o,this.webview=i,this.actionSheetController=a,this.toastController=s,this.storage=b,this.plt=h,this.loadingController=p,this.ref=d,this.filePath=m,this.authenticationService=f,this.capturedImage={path:\"\",filePath:\"\"},this.hasNewImage=!1,this.fileTransfer=this.transfer.create(),this.authenticationService.getCurrentUser().then(l=>{this.userId=l.id,this.returnPath=c.a.photoUrl+l.photo})}presentToast(l){return u.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,position:\"bottom\",duration:3e3})).present()}))}ngOnInit(){this.plt.ready().then(()=>{})}selectImage(){return u.b(this,void 0,void 0,(function*(){const l=yield this.actionSheetController.create({header:\"Select Image source\",buttons:[{text:\"Load from Library\",handler:()=>{this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:\"Use Camera\",handler:()=>{this.takePicture(this.camera.PictureSourceType.CAMERA)}},{text:\"Cancel\",role:\"cancel\"}]});yield l.present()}))}takePicture(l){this.camera.getPicture({quality:100,allowEdit:!0,sourceType:l,destinationType:this.camera.DestinationType.FILE_URI,saveToPhotoAlbum:!0,correctOrientation:!0}).then(l=>{this.returnPath=l,this.hasNewImage=!0})}upload(){this.loaderService.showLoader(\"Saving document ...\"),this.fileTransfer.upload(this.returnPath,`${c.a.url}/user/photo`,{mimeType:\"multipart/form-data\",chunkedMode:!1,fileKey:\"file\",params:{userId:this.userId}}).then(l=>{this.loaderService.hideLoader(),this.presentToast(\"Your profile photo was update successfully\")},l=>{this.loaderService.hideLoader(),this.alertService.presentToast(\"The server couldn't save this, try again later.\")})}uploadImageData(l){return u.b(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:\"Uploading image...\"});yield n.present(),this.http.post(`${c.a.url}/user/photo`,l).pipe(Object(m.a)(()=>{n.dismiss()})).subscribe(l=>{this.presentToast(l.error?\"File upload failed.\":\"Your profile photo was update successfully\")})}))}}class g{}var v=e(\"pMnS\"),y=e(\"oBZk\"),q=e(\"SVse\"),x=e(\"IheW\"),I=e(\"xgBC\"),P=t.pb({encapsulation:0,styles:[[\"\"]],data:{}});function S(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,3,\"ion-buttons\",[[\"padding\",\"\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.upload()&&t),t}),y.U,y.f)),t.qb(1,49152,null,0,o.m,[t.h,t.k,t.x],null,null),t.qb(2,16384,null,0,o.e,[t.k],null,null),(l()(),t.Jb(-1,0,[\" Save \"]))],null,null)}function B(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,13,\"ion-header\",[],null,null,null,y.fb,y.q)),t.qb(1,49152,null,0,o.C,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,11,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,y.Db,y.O)),t.qb(3,49152,null,0,o.Db,[t.h,t.k,t.x],{color:[0,\"color\"]},null),(l()(),t.rb(4,0,null,0,2,\"ion-title\",[],null,null,null,y.Cb,y.N)),t.qb(5,49152,null,0,o.Bb,[t.h,t.k,t.x],null,null),(l()(),t.Jb(-1,0,[\"Profile Photo\"])),(l()(),t.rb(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,y.U,y.f)),t.qb(8,49152,null,0,o.m,[t.h,t.k,t.x],null,null),(l()(),t.rb(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],(function(l,n,e){var u=!0;return\"click\"===n&&(u=!1!==t.Db(l,11).onClick(e)&&u),u}),y.R,y.c)),t.qb(10,49152,null,0,o.h,[t.h,t.k,t.x],null,null),t.qb(11,16384,null,0,o.i,[[2,o.jb],o.Jb],null,null),(l()(),t.gb(16777216,null,0,1,null,S)),t.qb(13,16384,null,0,q.j,[t.M,t.J],{ngIf:[0,\"ngIf\"]},null),(l()(),t.rb(14,0,null,null,15,\"ion-content\",[[\"fullscreen\",\"\"],[\"padding\",\"\"]],null,null,null,y.bb,y.m)),t.qb(15,49152,null,0,o.v,[t.h,t.k,t.x],{fullscreen:[0,\"fullscreen\"]},null),t.qb(16,16384,null,0,o.e,[t.k],null,null),(l()(),t.rb(17,0,null,0,12,\"ion-card\",[],null,null,null,y.Z,y.g)),t.qb(18,49152,null,0,o.n,[t.h,t.k,t.x],null,null),(l()(),t.rb(19,0,null,0,10,\"ion-grid\",[],null,null,null,y.eb,y.p)),t.qb(20,49152,null,0,o.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(21,0,null,0,8,\"ion-row\",[[\"color\",\"primary\"],[\"justify-content-center\",\"\"]],null,null,null,y.vb,y.G)),t.qb(22,49152,null,0,o.kb,[t.h,t.k,t.x],null,null),t.qb(23,16384,null,0,o.e,[t.k],null,null),(l()(),t.rb(24,0,null,0,5,\"ion-col\",[[\"align-self-center\",\"\"],[\"size-lg\",\"5\"],[\"size-md\",\"6\"],[\"size-xs\",\"12\"]],null,null,null,y.ab,y.l)),t.qb(25,49152,null,0,o.u,[t.h,t.k,t.x],null,null),t.qb(26,16384,null,0,o.e,[t.k],null,null),(l()(),t.rb(27,0,null,0,2,\"div\",[[\"text-center\",\"\"]],null,null,null,null,null)),t.qb(28,16384,null,0,o.e,[t.k],null,null),(l()(),t.rb(29,0,null,null,0,\"img\",[],[[8,\"src\",4]],null,null,null,null)),(l()(),t.rb(30,0,null,null,9,\"ion-footer\",[[\"padding\",\"\"]],null,null,null,y.db,y.o)),t.qb(31,49152,null,0,o.A,[t.h,t.k,t.x],null,null),t.qb(32,16384,null,0,o.e,[t.k],null,null),(l()(),t.rb(33,0,null,0,6,\"ion-toolbar\",[],null,null,null,y.Db,y.O)),t.qb(34,49152,null,0,o.Db,[t.h,t.k,t.x],null,null),(l()(),t.rb(35,0,null,0,4,\"ion-button\",[[\"color\",\"primary\"],[\"expand\",\"block\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.selectImage()&&t),t}),y.T,y.e)),t.qb(36,49152,null,0,o.l,[t.h,t.k,t.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(l()(),t.rb(37,0,null,0,1,\"ion-icon\",[[\"name\",\"camera\"],[\"size\",\"large\"],[\"slot\",\"start\"]],null,null,null,y.gb,y.r)),t.qb(38,49152,null,0,o.D,[t.h,t.k,t.x],{name:[0,\"name\"],size:[1,\"size\"]},null),(l()(),t.Jb(-1,0,[\" Select Image\"]))],(function(l,n){var e=n.component;l(n,3,0,\"primary\"),l(n,13,0,e.hasNewImage),l(n,15,0,\"\"),l(n,36,0,\"primary\",\"block\"),l(n,38,0,\"camera\",\"large\")}),(function(l,n){l(n,29,0,t.vb(1,\"\",n.component.returnPath,\"\"))}))}function w(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,1,\"app-photo\",[],null,null,null,B,P)),t.qb(1,114688,null,0,k,[b.a,f.a,d.a,i.a,r.a,a.a,x.c,h.a,o.a,o.Rb,I.b,o.Mb,o.Hb,t.h,p.a,s.a],null,null)],(function(l,n){l(n,1,0)}),null)}var T=t.nb(\"app-photo\",k,w,{},{},[]),C=e(\"s7LF\"),L=e(\"iInd\");e.d(n,\"PhotoPageModuleNgFactory\",(function(){return j}));var j=t.ob(g,[],(function(l){return t.Ab([t.Bb(512,t.j,t.Z,[[8,[v.a,T]],[3,t.j],t.v]),t.Bb(4608,q.l,q.k,[t.s,[2,q.r]]),t.Bb(4608,C.l,C.l,[]),t.Bb(4608,o.c,o.c,[t.x,t.g]),t.Bb(4608,o.Ib,o.Ib,[o.c,t.j,t.p]),t.Bb(4608,o.Nb,o.Nb,[o.c,t.j,t.p]),t.Bb(1073742336,q.b,q.b,[]),t.Bb(1073742336,C.k,C.k,[]),t.Bb(1073742336,C.b,C.b,[]),t.Bb(1073742336,o.Fb,o.Fb,[]),t.Bb(1073742336,L.o,L.o,[[2,L.t],[2,L.m]]),t.Bb(1073742336,g,g,[]),t.Bb(1024,L.k,(function(){return[[{path:\"\",component:k}]]}),[])])}))}}]);","extractedComments":[]}