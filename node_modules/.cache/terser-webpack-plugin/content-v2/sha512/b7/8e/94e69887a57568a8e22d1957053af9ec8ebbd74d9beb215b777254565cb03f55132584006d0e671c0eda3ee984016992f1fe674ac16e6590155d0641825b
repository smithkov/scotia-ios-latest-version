{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{\"X7+O\":function(l,n,t){\"use strict\";t.r(n);var e=t(\"CcnG\"),u=t(\"mrSG\"),r=t(\"Pn9U\"),o=t(\"ZZ/e\"),i=t(\"wMzM\"),a=t(\"t8sF\"),s=t(\"18Le\"),c=t(\"AytR\"),b=t(\"CUZT\"),h=t(\"Yttj\"),p=t(\"iWj2\"),f=t(\"gRf5\"),d=t(\"2WpN\"),m=t(\"gREL\"),k=function(){function l(l,n,t,e,u,r,o,i,a,s,b,h,p,f,d,m){var k=this;this.loaderService=l,this.alertService=n,this.transfer=t,this.fileOpener=e,this.camera=u,this.file=r,this.http=o,this.webview=i,this.actionSheetController=a,this.toastController=s,this.storage=b,this.plt=h,this.loadingController=p,this.ref=f,this.filePath=d,this.authenticationService=m,this.capturedImage={path:\"\",filePath:\"\"},this.hasNewImage=!1,this.fileTransfer=this.transfer.create(),this.authenticationService.getCurrentUser().then((function(l){k.userId=l.id,k.capturedImage.path=c.a.photoUrl+l.photo}))}return l.prototype.presentToast=function(l){return u.b(this,void 0,void 0,(function(){return u.e(this,(function(n){switch(n.label){case 0:return[4,this.toastController.create({message:l,position:\"bottom\",duration:3e3})];case 1:return n.sent().present(),[2]}}))}))},l.prototype.ngOnInit=function(){this.plt.ready().then((function(){}))},l.prototype.selectImage=function(){return u.b(this,void 0,void 0,(function(){var l=this;return u.e(this,(function(n){switch(n.label){case 0:return[4,this.actionSheetController.create({header:\"Select Image source\",buttons:[{text:\"Load from Library\",handler:function(){l.takePicture(l.camera.PictureSourceType.PHOTOLIBRARY)}},{text:\"Use Camera\",handler:function(){l.takePicture(l.camera.PictureSourceType.CAMERA)}},{text:\"Cancel\",role:\"cancel\"}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},l.prototype.takePicture=function(l){var n=this;this.camera.getPicture({quality:100,sourceType:l,destinationType:this.camera.DestinationType.FILE_URI,saveToPhotoAlbum:!1,correctOrientation:!0}).then((function(l){n.returnPath=l,n.hasNewImage=!0}))},l.prototype.upload=function(){var l=this;this.loaderService.showLoader(\"Saving document ...\"),this.fileTransfer.upload(this.returnPath,c.a.url+\"/user/photo\",{mimeType:\"multipart/form-data\",chunkedMode:!1,fileKey:\"file\",params:{userId:this.userId}}).then((function(n){l.loaderService.hideLoader(),l.presentToast(\"Your profile photo was update successfully\")}),(function(n){l.loaderService.hideLoader(),l.alertService.presentToast(\"The server couldn't save this, try again later.\")}))},l.prototype.uploadImageData=function(l){return u.b(this,void 0,void 0,(function(){var n,t=this;return u.e(this,(function(e){switch(e.label){case 0:return[4,this.loadingController.create({message:\"Uploading image...\"})];case 1:return[4,(n=e.sent()).present()];case 2:return e.sent(),this.http.post(c.a.url+\"/user/photo\",l).pipe(Object(d.a)((function(){n.dismiss()}))).subscribe((function(l){t.presentToast(l.error?\"File upload failed.\":\"Your profile photo was update successfully\")})),[2]}}))}))},l}(),g=function(){return function(){}}(),v=t(\"pMnS\"),y=t(\"oBZk\"),z=t(\"Ip0R\"),I=t(\"t/Na\"),w=t(\"iw74\"),D=e.rb({encapsulation:0,styles:[[\"\"]],data:{}});function P(l){return e.Nb(0,[(l()(),e.tb(0,0,null,null,3,\"ion-buttons\",[[\"padding\",\"\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.upload()&&e),e}),y.U,y.f)),e.sb(1,49152,null,0,o.m,[e.h,e.k,e.z],null,null),e.sb(2,16384,null,0,o.e,[e.k],null,null),(l()(),e.Lb(-1,0,[\" Save \"]))],null,null)}function S(l){return e.Nb(0,[(l()(),e.tb(0,0,null,null,13,\"ion-header\",[],null,null,null,y.fb,y.q)),e.sb(1,49152,null,0,o.C,[e.h,e.k,e.z],null,null),(l()(),e.tb(2,0,null,0,11,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,y.Db,y.O)),e.sb(3,49152,null,0,o.Db,[e.h,e.k,e.z],{color:[0,\"color\"]},null),(l()(),e.tb(4,0,null,0,2,\"ion-title\",[],null,null,null,y.Cb,y.N)),e.sb(5,49152,null,0,o.Bb,[e.h,e.k,e.z],null,null),(l()(),e.Lb(-1,0,[\"Profile Photo\"])),(l()(),e.tb(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,y.U,y.f)),e.sb(8,49152,null,0,o.m,[e.h,e.k,e.z],null,null),(l()(),e.tb(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],(function(l,n,t){var u=!0;return\"click\"===n&&(u=!1!==e.Fb(l,11).onClick(t)&&u),u}),y.R,y.c)),e.sb(10,49152,null,0,o.h,[e.h,e.k,e.z],null,null),e.sb(11,16384,null,0,o.i,[[2,o.jb],o.Jb],null,null),(l()(),e.ib(16777216,null,0,1,null,P)),e.sb(13,16384,null,0,z.j,[e.O,e.L],{ngIf:[0,\"ngIf\"]},null),(l()(),e.tb(14,0,null,null,15,\"ion-content\",[[\"fullscreen\",\"\"],[\"padding\",\"\"]],null,null,null,y.bb,y.m)),e.sb(15,49152,null,0,o.v,[e.h,e.k,e.z],{fullscreen:[0,\"fullscreen\"]},null),e.sb(16,16384,null,0,o.e,[e.k],null,null),(l()(),e.tb(17,0,null,0,12,\"ion-card\",[],null,null,null,y.Z,y.g)),e.sb(18,49152,null,0,o.n,[e.h,e.k,e.z],null,null),(l()(),e.tb(19,0,null,0,10,\"ion-grid\",[],null,null,null,y.eb,y.p)),e.sb(20,49152,null,0,o.B,[e.h,e.k,e.z],null,null),(l()(),e.tb(21,0,null,0,8,\"ion-row\",[[\"color\",\"primary\"],[\"justify-content-center\",\"\"]],null,null,null,y.vb,y.G)),e.sb(22,49152,null,0,o.kb,[e.h,e.k,e.z],null,null),e.sb(23,16384,null,0,o.e,[e.k],null,null),(l()(),e.tb(24,0,null,0,5,\"ion-col\",[[\"align-self-center\",\"\"],[\"size-lg\",\"5\"],[\"size-md\",\"6\"],[\"size-xs\",\"12\"]],null,null,null,y.ab,y.l)),e.sb(25,49152,null,0,o.u,[e.h,e.k,e.z],null,null),e.sb(26,16384,null,0,o.e,[e.k],null,null),(l()(),e.tb(27,0,null,0,2,\"div\",[[\"text-center\",\"\"]],null,null,null,null,null)),e.sb(28,16384,null,0,o.e,[e.k],null,null),(l()(),e.tb(29,0,null,null,0,\"img\",[],[[8,\"src\",4]],null,null,null,null)),(l()(),e.tb(30,0,null,null,9,\"ion-footer\",[[\"padding\",\"\"]],null,null,null,y.db,y.o)),e.sb(31,49152,null,0,o.A,[e.h,e.k,e.z],null,null),e.sb(32,16384,null,0,o.e,[e.k],null,null),(l()(),e.tb(33,0,null,0,6,\"ion-toolbar\",[],null,null,null,y.Db,y.O)),e.sb(34,49152,null,0,o.Db,[e.h,e.k,e.z],null,null),(l()(),e.tb(35,0,null,0,4,\"ion-button\",[[\"color\",\"primary\"],[\"expand\",\"block\"]],null,[[null,\"click\"]],(function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.selectImage()&&e),e}),y.T,y.e)),e.sb(36,49152,null,0,o.l,[e.h,e.k,e.z],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(l()(),e.tb(37,0,null,0,1,\"ion-icon\",[[\"name\",\"camera\"],[\"size\",\"large\"],[\"slot\",\"start\"]],null,null,null,y.gb,y.r)),e.sb(38,49152,null,0,o.D,[e.h,e.k,e.z],{name:[0,\"name\"],size:[1,\"size\"]},null),(l()(),e.Lb(-1,0,[\" Select Image\"]))],(function(l,n){var t=n.component;l(n,3,0,\"primary\"),l(n,13,0,t.hasNewImage),l(n,15,0,\"\"),l(n,36,0,\"primary\",\"block\"),l(n,38,0,\"camera\",\"large\")}),(function(l,n){l(n,29,0,n.component.returnPath)}))}function C(l){return e.Nb(0,[(l()(),e.tb(0,0,null,null,1,\"app-photo\",[],null,null,null,S,D)),e.sb(1,114688,null,0,k,[b.a,m.a,f.a,i.a,r.a,a.a,I.c,h.a,o.a,o.Rb,w.b,o.Mb,o.Hb,e.h,p.a,s.a],null,null)],(function(l,n){l(n,1,0)}),null)}var T=e.pb(\"app-photo\",k,C,{},{},[]),L=t(\"gIcY\"),N=t(\"ZYCi\");t.d(n,\"PhotoPageModuleNgFactory\",(function(){return j}));var j=e.qb(g,[],(function(l){return e.Cb([e.Db(512,e.j,e.bb,[[8,[v.a,T]],[3,e.j],e.x]),e.Db(4608,z.l,z.k,[e.u,[2,z.r]]),e.Db(4608,L.l,L.l,[]),e.Db(4608,o.c,o.c,[e.z,e.g]),e.Db(4608,o.Ib,o.Ib,[o.c,e.j,e.q]),e.Db(4608,o.Nb,o.Nb,[o.c,e.j,e.q]),e.Db(1073742336,z.b,z.b,[]),e.Db(1073742336,L.k,L.k,[]),e.Db(1073742336,L.b,L.b,[]),e.Db(1073742336,o.Fb,o.Fb,[]),e.Db(1073742336,N.o,N.o,[[2,N.t],[2,N.m]]),e.Db(1073742336,g,g,[]),e.Db(1024,N.k,(function(){return[[{path:\"\",component:k}]]}),[])])}))}}]);","extractedComments":[]}