{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{\"X7+O\":function(l,n,e){\"use strict\";e.r(n);var t=e(\"8Y7J\"),u=e(\"mrSG\"),r=e(\"Pn9U\"),i=e(\"ZZ/e\"),o=e(\"wMzM\"),a=e(\"t8sF\"),s=e(\"18Le\"),c=e(\"AytR\"),b=e(\"CUZT\"),h=e(\"Yttj\"),p=e(\"iWj2\"),d=e(\"gRf5\"),f=e(\"nYR2\"),m=e(\"gREL\");class g{constructor(l,n,e,t,u,r,i,o,a,s,b,h,p,d,f,m){this.loaderService=l,this.alertService=n,this.transfer=e,this.fileOpener=t,this.camera=u,this.file=r,this.http=i,this.webview=o,this.actionSheetController=a,this.toastController=s,this.storage=b,this.plt=h,this.loadingController=p,this.ref=d,this.filePath=f,this.authenticationService=m,this.capturedImage={path:\"\",filePath:\"\"},this.hasNewImage=!1,this.fileTransfer=this.transfer.create(),this.authenticationService.getCurrentUser().then(l=>{this.userId=l.id,this.img=c.a.photoUrl+l.photo})}presentToast(l){return u.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,position:\"bottom\",duration:3e3})).present()}))}ngOnInit(){this.plt.ready().then(()=>{})}selectImage(){return u.b(this,void 0,void 0,(function*(){const l=yield this.actionSheetController.create({header:\"Select Image source\",buttons:[{text:\"Load from Library\",handler:()=>{this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:\"Use Camera\",handler:()=>{this.takePicture(this.camera.PictureSourceType.CAMERA)}},{text:\"Cancel\",role:\"cancel\"}]});yield l.present()}))}takePicture(l){this.camera.getPicture({quality:100,allowEdit:!0,sourceType:l,destinationType:this.camera.DestinationType.FILE_URI,saveToPhotoAlbum:!1,correctOrientation:!0}).then(l=>{this.returnPath=l,this.hasNewImage=!0;let n=l.substring(l.lastIndexOf(\"/\")+1),e=l.substring(0,l.lastIndexOf(\"/\")+1);this.file.readAsDataURL(e,n).then(l=>this.img=l)})}upload(){this.loaderService.showLoader(\"Saving document ...\"),this.fileTransfer.upload(this.returnPath,`${c.a.url}/user/photo`,{mimeType:\"multipart/form-data\",chunkedMode:!1,fileKey:\"file\",params:{userId:this.userId}}).then(l=>{this.loaderService.hideLoader(),this.presentToast(\"Your profile photo was update successfully\")},l=>{this.loaderService.hideLoader(),this.alertService.presentToast(\"The server couldn't save this, try again later.\")})}uploadImageData(l){return u.b(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:\"Uploading image...\"});yield n.present(),this.http.post(`${c.a.url}/user/photo`,l).pipe(Object(f.a)(()=>{n.dismiss()})).subscribe(l=>{this.presentToast(l.error?\"File upload failed.\":\"Your profile photo was update successfully\")})}))}}class k{}var v=e(\"pMnS\"),x=e(\"oBZk\"),y=e(\"SVse\"),q=e(\"IheW\"),I=e(\"xgBC\"),S=t.pb({encapsulation:0,styles:[[\"\"]],data:{}});function B(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,3,\"ion-buttons\",[[\"padding\",\"\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.upload()&&t),t}),x.U,x.f)),t.qb(1,49152,null,0,i.m,[t.h,t.k,t.x],null,null),t.qb(2,16384,null,0,i.e,[t.k],null,null),(l()(),t.Jb(-1,0,[\" Save \"]))],null,null)}function P(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,13,\"ion-header\",[],null,null,null,x.fb,x.q)),t.qb(1,49152,null,0,i.C,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,11,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,x.Db,x.O)),t.qb(3,49152,null,0,i.Db,[t.h,t.k,t.x],{color:[0,\"color\"]},null),(l()(),t.rb(4,0,null,0,2,\"ion-title\",[],null,null,null,x.Cb,x.N)),t.qb(5,49152,null,0,i.Bb,[t.h,t.k,t.x],null,null),(l()(),t.Jb(-1,0,[\"Profile Photo\"])),(l()(),t.rb(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,x.U,x.f)),t.qb(8,49152,null,0,i.m,[t.h,t.k,t.x],null,null),(l()(),t.rb(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],(function(l,n,e){var u=!0;return\"click\"===n&&(u=!1!==t.Db(l,11).onClick(e)&&u),u}),x.R,x.c)),t.qb(10,49152,null,0,i.h,[t.h,t.k,t.x],null,null),t.qb(11,16384,null,0,i.i,[[2,i.jb],i.Jb],null,null),(l()(),t.gb(16777216,null,0,1,null,B)),t.qb(13,16384,null,0,y.j,[t.M,t.J],{ngIf:[0,\"ngIf\"]},null),(l()(),t.rb(14,0,null,null,15,\"ion-content\",[[\"fullscreen\",\"\"],[\"padding\",\"\"]],null,null,null,x.bb,x.m)),t.qb(15,49152,null,0,i.v,[t.h,t.k,t.x],{fullscreen:[0,\"fullscreen\"]},null),t.qb(16,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(17,0,null,0,12,\"ion-card\",[],null,null,null,x.Z,x.g)),t.qb(18,49152,null,0,i.n,[t.h,t.k,t.x],null,null),(l()(),t.rb(19,0,null,0,10,\"ion-grid\",[],null,null,null,x.eb,x.p)),t.qb(20,49152,null,0,i.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(21,0,null,0,8,\"ion-row\",[[\"color\",\"primary\"],[\"justify-content-center\",\"\"]],null,null,null,x.vb,x.G)),t.qb(22,49152,null,0,i.kb,[t.h,t.k,t.x],null,null),t.qb(23,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(24,0,null,0,5,\"ion-col\",[[\"align-self-center\",\"\"],[\"size-lg\",\"5\"],[\"size-md\",\"6\"],[\"size-xs\",\"12\"]],null,null,null,x.ab,x.l)),t.qb(25,49152,null,0,i.u,[t.h,t.k,t.x],null,null),t.qb(26,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(27,0,null,0,2,\"div\",[[\"text-center\",\"\"]],null,null,null,null,null)),t.qb(28,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(29,0,null,null,0,\"img\",[],[[8,\"src\",4]],null,null,null,null)),(l()(),t.rb(30,0,null,null,9,\"ion-footer\",[[\"padding\",\"\"]],null,null,null,x.db,x.o)),t.qb(31,49152,null,0,i.A,[t.h,t.k,t.x],null,null),t.qb(32,16384,null,0,i.e,[t.k],null,null),(l()(),t.rb(33,0,null,0,6,\"ion-toolbar\",[],null,null,null,x.Db,x.O)),t.qb(34,49152,null,0,i.Db,[t.h,t.k,t.x],null,null),(l()(),t.rb(35,0,null,0,4,\"ion-button\",[[\"color\",\"primary\"],[\"expand\",\"block\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.selectImage()&&t),t}),x.T,x.e)),t.qb(36,49152,null,0,i.l,[t.h,t.k,t.x],{color:[0,\"color\"],expand:[1,\"expand\"]},null),(l()(),t.rb(37,0,null,0,1,\"ion-icon\",[[\"name\",\"camera\"],[\"size\",\"large\"],[\"slot\",\"start\"]],null,null,null,x.gb,x.r)),t.qb(38,49152,null,0,i.D,[t.h,t.k,t.x],{name:[0,\"name\"],size:[1,\"size\"]},null),(l()(),t.Jb(-1,0,[\" Select Image\"]))],(function(l,n){var e=n.component;l(n,3,0,\"primary\"),l(n,13,0,e.hasNewImage),l(n,15,0,\"\"),l(n,36,0,\"primary\",\"block\"),l(n,38,0,\"camera\",\"large\")}),(function(l,n){l(n,29,0,t.vb(1,\"\",n.component.returnPath,\"\"))}))}function w(l){return t.Lb(0,[(l()(),t.rb(0,0,null,null,1,\"app-photo\",[],null,null,null,P,S)),t.qb(1,114688,null,0,g,[b.a,m.a,d.a,o.a,r.a,a.a,q.c,h.a,i.a,i.Rb,I.b,i.Mb,i.Hb,t.h,p.a,s.a],null,null)],(function(l,n){l(n,1,0)}),null)}var T=t.nb(\"app-photo\",g,w,{},{},[]),C=e(\"s7LF\"),L=e(\"iInd\");e.d(n,\"PhotoPageModuleNgFactory\",(function(){return O}));var O=t.ob(k,[],(function(l){return t.Ab([t.Bb(512,t.j,t.Z,[[8,[v.a,T]],[3,t.j],t.v]),t.Bb(4608,y.l,y.k,[t.s,[2,y.r]]),t.Bb(4608,C.l,C.l,[]),t.Bb(4608,i.c,i.c,[t.x,t.g]),t.Bb(4608,i.Ib,i.Ib,[i.c,t.j,t.p]),t.Bb(4608,i.Nb,i.Nb,[i.c,t.j,t.p]),t.Bb(1073742336,y.b,y.b,[]),t.Bb(1073742336,C.k,C.k,[]),t.Bb(1073742336,C.b,C.b,[]),t.Bb(1073742336,i.Fb,i.Fb,[]),t.Bb(1073742336,L.o,L.o,[[2,L.t],[2,L.m]]),t.Bb(1073742336,k,k,[]),t.Bb(1024,L.k,(function(){return[[{path:\"\",component:g}]]}),[])])}))}}]);","extractedComments":[]}